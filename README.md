# ğŸš€ RAG ç³»ç»Ÿ - é«˜æ€§èƒ½æ£€ç´¢å¢å¼ºç”Ÿæˆå¹³å°

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Rust](https://img.shields.io/badge/Rust-1.75+-orange.svg)](https://www.rust-lang.org/)
[![Go](https://img.shields.io/badge/Go-1.21+-blue.svg)](https://golang.org/)
[![React](https://img.shields.io/badge/React-18+-61DAFB.svg)](https://reactjs.org/)
[![Docker](https://img.shields.io/badge/Docker-20+-2496ED.svg)](https://www.docker.com/)

ä¸€ä¸ªç°ä»£åŒ–ã€é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„ RAG (Retrieval-Augmented Generation) ç³»ç»Ÿï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„å’Œäº‘åŸç”ŸæŠ€æœ¯æ ˆæ„å»ºã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ é«˜æ€§èƒ½å¼•æ“

- **Rust æ ¸å¿ƒå¼•æ“**: æè‡´æ€§èƒ½çš„æ–‡æ¡£å¤„ç†ã€åµŒå…¥ç”Ÿæˆå’Œå‘é‡æ£€ç´¢
- **å¼‚æ­¥å¹¶å‘**: åŸºäº Tokio çš„é«˜å¹¶å‘å¼‚æ­¥å¤„ç†æ¶æ„
- **é›¶æ‹·è´ä¼˜åŒ–**: å†…å­˜å®‰å…¨çš„é«˜æ•ˆæ•°æ®å¤„ç†
- **SIMD åŠ é€Ÿ**: å‘é‡è®¡ç®—çš„ç¡¬ä»¶åŠ é€Ÿæ”¯æŒ

### ğŸ” æ™ºèƒ½æ£€ç´¢

- **æ··åˆæ£€ç´¢ç­–ç•¥**: å¯†é›†å‘é‡ + ç¨€ç–å…³é”®è¯çš„æœ€ä½³ç»„åˆ
- **å¤šå‘é‡æ”¯æŒ**: æ–‡æ¡£ã€æ®µè½ã€å¥å­å¤šå±‚çº§æ£€ç´¢
- **å®æ—¶é‡æ’åº**: åŸºäºäº¤å‰ç¼–ç å™¨çš„ç²¾ç¡®ç›¸å…³æ€§æ’åº
- **æŸ¥è¯¢æ‰©å±•**: æ™ºèƒ½æŸ¥è¯¢ç†è§£å’Œè‡ªåŠ¨æ‰©å±•

### ğŸ¤– LLM é›†æˆ

- **å¤šæä¾›å•†æ”¯æŒ**: OpenAIã€Anthropicã€æœ¬åœ°æ¨¡å‹æ— ç¼åˆ‡æ¢
- **æµå¼ç”Ÿæˆ**: å®æ—¶å“åº”çš„æµå¼æ–‡æœ¬ç”Ÿæˆ
- **ä¸Šä¸‹æ–‡ç®¡ç†**: æ™ºèƒ½å¯¹è¯å†å²å’Œä¸Šä¸‹æ–‡çª—å£ç®¡ç†
- **æç¤ºå·¥ç¨‹**: åŠ¨æ€æç¤ºæ¨¡æ¿å’Œä¼˜åŒ–ç­–ç•¥

### ğŸ”Œ æ’ä»¶åŒ–æ¶æ„

- **WASM æ’ä»¶**: å®‰å…¨çš„æ²™ç®±åŒ–æ’ä»¶è¿è¡Œç¯å¢ƒ
- **åŸç”Ÿæ’ä»¶**: é«˜æ€§èƒ½çš„ FFI æ’ä»¶æ¥å£
- **çƒ­æ’æ‹”**: è¿è¡Œæ—¶æ’ä»¶åŠ è½½å’Œå¸è½½
- **æ’ä»¶å¸‚åœº**: ä¸°å¯Œçš„ç¤¾åŒºæ’ä»¶ç”Ÿæ€

### ğŸ“Š ä¼ä¸šçº§ç‰¹æ€§

- **å¤šç§Ÿæˆ·**: å®Œæ•´çš„å·¥ä½œç©ºé—´å’Œæƒé™ç®¡ç†
- **å¯è§‚æµ‹æ€§**: Prometheus + Grafana + Jaeger å…¨é“¾è·¯ç›‘æ§
- **é«˜å¯ç”¨**: åˆ†å¸ƒå¼éƒ¨ç½²å’Œè‡ªåŠ¨æ•…éšœæ¢å¤
- **å®‰å…¨æ€§**: ç«¯åˆ°ç«¯åŠ å¯†å’Œç»†ç²’åº¦è®¿é—®æ§åˆ¶

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯å±‚ (React)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       API ç½‘å…³å±‚ (Go)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      æ ¸å¿ƒå¼•æ“å±‚ (Rust)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PostgreSQL â”‚  Redis  â”‚  Qdrant  â”‚  MinIO  â”‚  Elasticsearch   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| å±‚çº§           | æŠ€æœ¯é€‰å‹                      | èŒè´£               |
| -------------- | ----------------------------- | ------------------ |
| **å‰ç«¯**       | React 18 + TypeScript + Vite  | ç”¨æˆ·ç•Œé¢ã€å®æ—¶äº¤äº’ |
| **API å±‚**     | Go + Gin + gRPC               | æœåŠ¡åè°ƒã€è®¤è¯æˆæƒ |
| **æ ¸å¿ƒå¼•æ“**   | Rust + Tokio + Candle         | æ–‡æ¡£å¤„ç†ã€å‘é‡æ£€ç´¢ |
| **å‘é‡æ•°æ®åº“** | Qdrant                        | å‘é‡å­˜å‚¨å’Œæ£€ç´¢     |
| **å…³ç³»æ•°æ®åº“** | PostgreSQL                    | å…ƒæ•°æ®å’Œç”¨æˆ·æ•°æ®   |
| **ç¼“å­˜**       | Redis                         | é«˜é€Ÿç¼“å­˜å±‚         |
| **å¯¹è±¡å­˜å‚¨**   | MinIO / S3                    | æ–‡ä»¶å­˜å‚¨           |
| **æœç´¢å¼•æ“**   | Elasticsearch                 | å…¨æ–‡æ£€ç´¢           |
| **æ¶ˆæ¯é˜Ÿåˆ—**   | RabbitMQ                      | å¼‚æ­¥ä»»åŠ¡å¤„ç†       |
| **ç›‘æ§**       | Prometheus + Grafana + Jaeger | å¯è§‚æµ‹æ€§           |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux / macOS / Windows
- **å†…å­˜**: æœ€ä½ 8GBï¼Œæ¨è 16GB+
- **å­˜å‚¨**: æœ€ä½ 20GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: äº’è”ç½‘è¿æ¥ï¼ˆç”¨äºä¸‹è½½ä¾èµ–å’Œæ¨¡å‹ï¼‰

### å¼€å‘ç¯å¢ƒä¾èµ–

```bash
# æ ¸å¿ƒä¾èµ–
Docker >= 20.0
Docker Compose >= 2.0
Rust >= 1.75
Go >= 1.21
Node.js >= 18
```

### ä¸€é”®å¯åŠ¨

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/rag-system.git
cd rag-system

# 2. åˆå§‹åŒ–ç¯å¢ƒ
make init

# 3. å¯åŠ¨å¼€å‘ç¯å¢ƒ
make dev
```

å¯åŠ¨å®Œæˆåï¼Œè®¿é—®ä»¥ä¸‹åœ°å€ï¼š

- ğŸŒ **å‰ç«¯ç•Œé¢**: http://localhost:3000
- ğŸ“š **API æ–‡æ¡£**: http://localhost:8000/swagger/index.html
- ğŸ“Š **ç›‘æ§é¢æ¿**: http://localhost:3001 (admin/admin123)
- ğŸ” **é“¾è·¯è¿½è¸ª**: http://localhost:16686

### æ‰‹åŠ¨å¯åŠ¨ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦æ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œå¯ä»¥åˆ†æ­¥å¯åŠ¨ï¼š

```bash
# å¯åŠ¨åŸºç¡€è®¾æ–½
make dev-infra

# å¯åŠ¨ Rust å¼•æ“
make dev-rust

# å¯åŠ¨ Go API
make dev-go

# å¯åŠ¨å‰ç«¯
make dev-frontend
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œ

#### 1. æ–‡æ¡£ä¸Šä¼ å’Œç´¢å¼•

```bash
# é€šè¿‡ API ä¸Šä¼ æ–‡æ¡£
curl -X POST http://localhost:8000/api/v1/documents \
  -F "file=@document.pdf" \
  -F "title=ç¤ºä¾‹æ–‡æ¡£" \
  -H "Authorization: Bearer $TOKEN"
```

#### 2. æ‰§è¡Œæ£€ç´¢

```bash
# å‘é‡æ£€ç´¢
curl -X POST http://localhost:8000/api/v1/search \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "query": "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ",
    "top_k": 10,
    "strategy": "hybrid"
  }'
```

#### 3. å¯¹è¯äº¤äº’

```bash
# å¯åŠ¨ RAG å¯¹è¯
curl -X POST http://localhost:8000/api/v1/chat \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "message": "è¯·è§£é‡Šé‡å­è®¡ç®—çš„åŸºæœ¬åŸç†",
    "conversation_id": "uuid",
    "enable_rag": true
  }'
```

### é«˜çº§é…ç½®

#### è‡ªå®šä¹‰åµŒå…¥æ¨¡å‹

```toml
# rag-engine/config/local.toml
[embedding.providers.local]
model_name = "sentence-transformers/all-mpnet-base-v2"
model_path = "./models/embedding"
device = "cuda"  # æˆ– "cpu", "mps"
batch_size = 64
```

#### æ£€ç´¢ç­–ç•¥è°ƒä¼˜

```yaml
# rag-api/configs/local.yaml
retrieval:
  strategies:
    hybrid:
      dense_weight: 0.7
      sparse_weight: 0.3
    dense:
      similarity_threshold: 0.75
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
rag-system/
â”œâ”€â”€ rag-engine/           # Rust æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ embedding/    # åµŒå…¥ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ retrieval/    # æ£€ç´¢ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ llm/         # LLM é›†æˆ
â”‚   â”‚   â””â”€â”€ plugins/     # æ’ä»¶ç³»ç»Ÿ
â”‚   â””â”€â”€ Cargo.toml
â”œâ”€â”€ rag-api/             # Go API ç½‘å…³
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ handlers/    # HTTP å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ services/    # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ models/      # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ go.mod
â”œâ”€â”€ rag-frontend/        # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/  # ç»„ä»¶åº“
â”‚   â”‚   â”œâ”€â”€ pages/       # é¡µé¢
â”‚   â”‚   â””â”€â”€ services/    # API æœåŠ¡
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ infrastructure/      # åŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ docker/         # Docker é…ç½®
â”‚   â”œâ”€â”€ kubernetes/     # K8s éƒ¨ç½²
â”‚   â””â”€â”€ helm/          # Helm Charts
â””â”€â”€ Makefile           # ç»Ÿä¸€å‘½ä»¤å…¥å£
```

### å¼€å‘å·¥ä½œæµ

```bash
# æ£€æŸ¥ä»£ç è´¨é‡
make lint

# è¿è¡Œæµ‹è¯•
make test

# æ ¼å¼åŒ–ä»£ç 
make format

# æ„å»ºé¡¹ç›®
make build

# ç”Ÿæˆæ–‡æ¡£
make docs

# æ€§èƒ½æµ‹è¯•
make bench
```

### æ·»åŠ æ–°åŠŸèƒ½

1. **Rust å¼•æ“æ‰©å±•**:

    ```bash
    cd rag-engine
    cargo generate --template module
    ```

2. **Go API ç«¯ç‚¹**:

    ```bash
    cd rag-api
    # æ·»åŠ æ–°çš„å¤„ç†å™¨å’Œè·¯ç”±
    ```

3. **å‰ç«¯ç»„ä»¶**:

    ```bash
    cd rag-frontend
    npm run generate:component
    ```

## ğŸ”§ é…ç½®å‚è€ƒ

### ç¯å¢ƒå˜é‡

| å˜é‡å           | æè¿°                  | é»˜è®¤å€¼                   |
| ---------------- | --------------------- | ------------------------ |
| `DATABASE_URL`   | PostgreSQL è¿æ¥å­—ç¬¦ä¸² | `postgres://...`         |
| `REDIS_URL`      | Redis è¿æ¥å­—ç¬¦ä¸²      | `redis://localhost:6379` |
| `QDRANT_URL`     | Qdrant æœåŠ¡åœ°å€       | `http://localhost:6333`  |
| `OPENAI_API_KEY` | OpenAI API å¯†é’¥       | -                        |
| `JWT_SECRET_KEY` | JWT ç­¾åå¯†é’¥          | -                        |

### æ€§èƒ½è°ƒä¼˜

#### Rust å¼•æ“ä¼˜åŒ–

```toml
[concurrency]
worker_threads = 8
embedding_concurrency = 20
retrieval_concurrency = 50
llm_concurrency = 10

[cache.memory]
max_size = 2147483648  # 2GB
```

#### Go API ä¼˜åŒ–

```yaml
database:
  max_open_conns: 50
  max_idle_conns: 25
  conn_max_lifetime: 3600s

redis:
  pool_size: 100
  min_idle_conns: 20
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
make docker-build

# å¯åŠ¨æœåŠ¡
docker-compose -f infrastructure/docker/docker-compose/production.yml up -d
```

### Kubernetes éƒ¨ç½²

```bash
# ä½¿ç”¨ Helm éƒ¨ç½²
helm install rag-system infrastructure/helm/rag-system/ \
  --namespace rag-system \
  --create-namespace \
  --values infrastructure/helm/rag-system/values-prod.yaml
```

### äº‘å¹³å°éƒ¨ç½²

æ”¯æŒä¸€é”®éƒ¨ç½²åˆ°ä¸»æµäº‘å¹³å°ï¼š

- **AWS**: EKS + RDS + ElastiCache + S3
- **Azure**: AKS + Azure Database + Redis Cache + Blob Storage  
- **GCP**: GKE + Cloud SQL + Memorystore + Cloud Storage
- **é˜¿é‡Œäº‘**: ACK + RDS + Redis + OSS

### æ€§èƒ½åŸºå‡†

åœ¨æ ‡å‡†ç¡¬ä»¶é…ç½®ä¸‹çš„æ€§èƒ½æŒ‡æ ‡ï¼š

| æŒ‡æ ‡         | å€¼               |
| ------------ | ---------------- |
| **æ£€ç´¢å»¶è¿Ÿ** | < 50ms (P95)     |
| **å¹¶å‘æŸ¥è¯¢** | 10,000+ QPS      |
| **æ–‡æ¡£å¤„ç†** | 1,000+ docs/min  |
| **å†…å­˜ä½¿ç”¨** | < 4GB (10M æ–‡æ¡£) |
| **ç´¢å¼•æ„å»º** | 100K docs/hour   |

## ğŸ“Š ç›‘æ§å’Œè¿ç»´

### å…³é”®æŒ‡æ ‡

- **å“åº”æ—¶é—´**: API å“åº”æ—¶é—´åˆ†å¸ƒ
- **ååé‡**: æ¯ç§’è¯·æ±‚æ•°å’Œæ–‡æ¡£å¤„ç†é‡
- **é”™è¯¯ç‡**: å„ç»„ä»¶é”™è¯¯ç‡ç»Ÿè®¡
- **èµ„æºä½¿ç”¨**: CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
- **ä¸šåŠ¡æŒ‡æ ‡**: æ£€ç´¢å‡†ç¡®ç‡ã€ç”¨æˆ·æ»¡æ„åº¦

### å‘Šè­¦è§„åˆ™

```yaml
# æ£€ç´¢å»¶è¿Ÿå‘Šè­¦
- alert: HighSearchLatency
  expr: histogram_quantile(0.95, search_duration_seconds) > 2
  for: 5m

# é”™è¯¯ç‡å‘Šè­¦  
- alert: HighErrorRate
  expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
  for: 2m
```

### æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
make logs-all

# ç‰¹å®šæœåŠ¡æ—¥å¿—
make logs-rust    # Rust å¼•æ“
make logs-go      # Go API
make logs-frontend # å‰ç«¯æœåŠ¡
```

## ğŸ” å®‰å…¨æ€§

### è®¤è¯æˆæƒ

- **JWT**: æ— çŠ¶æ€çš„ token è®¤è¯
- **OAuth 2.0**: ç¬¬ä¸‰æ–¹ç™»å½•é›†æˆ
- **RBAC**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **API å¯†é’¥**: æœåŠ¡é—´å®‰å…¨é€šä¿¡

### æ•°æ®ä¿æŠ¤

- **ä¼ è¾“åŠ å¯†**: TLS 1.3 ç«¯åˆ°ç«¯åŠ å¯†
- **å­˜å‚¨åŠ å¯†**: é™æ€æ•°æ® AES-256 åŠ å¯†
- **æ•°æ®è„±æ•**: æ•æ„Ÿä¿¡æ¯è‡ªåŠ¨è„±æ•
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œå®¡è®¡è¿½è¸ª

### å®‰å…¨æœ€ä½³å®è·µ

- å®šæœŸå®‰å…¨æ‰«æå’Œæ¼æ´ä¿®å¤
- æœ€å°æƒé™åŸåˆ™å’Œç½‘ç»œéš”ç¦»
- å®¹å™¨é•œåƒå®‰å…¨åŸºçº¿æ£€æŸ¥
- ä¾èµ–é¡¹å®‰å…¨æ€§æŒç»­ç›‘æ§

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æµç¨‹

1. **Fork é¡¹ç›®** åˆ°æ‚¨çš„ GitHub è´¦æˆ·
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**: `git checkout -b feature/amazing-feature`
3. **æäº¤æ›´æ”¹**: `git commit -m 'Add amazing feature'`
4. **æ¨é€åˆ†æ”¯**: `git push origin feature/amazing-feature`
5. **åˆ›å»º Pull Request**

### å¼€å‘è§„èŒƒ

- **ä»£ç é£æ ¼**: éµå¾ªå„è¯­è¨€çš„å®˜æ–¹ä»£ç è§„èŒƒ
- **æµ‹è¯•è¦†ç›–**: æ–°åŠŸèƒ½å¿…é¡»åŒ…å«å•å…ƒæµ‹è¯•
- **æ–‡æ¡£æ›´æ–°**: é‡è¦å˜æ›´éœ€è¦æ›´æ–°ç›¸å…³æ–‡æ¡£
- **æ€§èƒ½æµ‹è¯•**: æ€§èƒ½ç›¸å…³æ”¹åŠ¨éœ€è¦æä¾›åŸºå‡†æµ‹è¯•

### é—®é¢˜æŠ¥å‘Š

ä½¿ç”¨ [GitHub Issues](https://github.com/your-org/rag-system/